package com.kfouri.opentest.api

import com.kfouri.opentest.api.model.HeroResponse
import com.kfouri.opentest.extension.parse
import kotlinx.coroutines.Dispatchers
import kotlinx.coroutines.withContext

class HeroService : IHeroService {

    private val mAPIService: APIService? by lazy {
        ApiClient.apiService
    }

    override suspend fun getHeroList(offset: String, limit: String): Resource<HeroResponse> {
        return withContext(Dispatchers.IO) {
            return@withContext mAPIService?.getHeroList(offset, limit)?.parse()!!
        }
    }

    override suspend fun getHeroDetail(id: String): Resource<HeroResponse> {
        return withContext(Dispatchers.IO) {
            return@withContext mAPIService?.getHeroDetail(id)?.parse()!!
        }
    }

    override suspend fun getSearchHero(nameStartsWith: String, offset: String, limit: String): Resource<HeroResponse> {
        return withContext(Dispatchers.IO) {
            return@withContext mAPIService?.getSearchHero(nameStartsWith, offset, limit)?.parse()!!
        }
    }
}